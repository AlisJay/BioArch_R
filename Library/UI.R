library(shiny);library(markdown)

shinyUI(navbarPage("Library",
                   tabPanel("New",
                            fluidPage(
                              column(width=6,
                                     textInput("Author","Primary Author",value="unknown",width=600),
                                     textInput("Location","Location of document",value=NA,width=600)),
                              column(width=6,
                                     textInput("Date","Date",value="ND",width=100),
                                     selectInput("Type", "Input Type?", c("Journal"="J","Online Journal"="OJ","Book"="B","Book Chapter"="BC","Thesis"="T","Conference proceedings"="C","Conference Paper"="CP","Conference paper online"="OC","Report"="R","Online Report"="OR","Government publication"="GP","Internationl Organisation Publication"="IOP","Standards"="S","Other"="O"))),
                              conditionalPanel("input.Type!='C'",textInput("Title","Title",value="Title",width=1000)),
                              
                              conditionalPanel("input.Type=='O'",
                                               textInput("Authors_O","Other Authors (separate using : or ;)",value=NA,width=1000),
                                               textInput("Ref_O","other reference info",value=NULL,width=1000)),
                              conditionalPanel("input.Type=='J'",
                                               textInput("Authors_J","Other Authors (separate using : or ;)",value="None",width=1000),
                                               textInput("Title_J","Journal Title",value=NA,width=1000),
                                               column(width=4,textInput("Issue_J","Issue",value=NA,width=100)),
                                               column(width=4,textInput("sPage_J","Start Page",value=NA,width=100)),
                                               column(width=4,textInput("ePage_J","End Page",value=NA,width=100))),
                              conditionalPanel("input.Type=='B'",
                                               textInput("Authors_B","Other Authors (separate using : or ;)",value="None",width=1000),
                                               textInput("Publisher_B","Publisher",value=NA,width=1000),
                                               textInput("Place_B","Place of publication",value=NA,width=1000),
                                               column(width=6,textInput("Edition_B","Edition",value="1",width=100)),
                                               column(width=6,textInput("Volume_B","Volume or series number",value=NULL,width=100))),
                              conditionalPanel("input.Type=='BC'",
                                               textInput("Authors_BC","Other Chapter Authors (separate using : or ;)",value="None",width=1000),
                                               textInput("Editor_BC","Book Editors (separate using : or ;)",value=NA,width=1000),
                                               textInput("Title_BC","Book Title",value=NA,width=1000),
                                               textInput("Publisher_BC","Publisher",value=NA,width=1000),
                                               textInput("Place_BC","Place of publication",value=NA,width=1000),
                                               column(width=3,textInput("Edition_BC","Edition",value="1",width=100)),
                                               column(width=3,textInput("Volume_BC","Volume/series",value=NULL,width=100)),
                                               column(width=3,textInput("sPage_BC","Start Page",value=NA,width=100)),
                                               column(width=3,textInput("ePage_B","End Page",value=NA,width=100))),
                              conditionalPanel("input.Type=='OJ'",
                                              textInput("Authors_OJ","Other Authors (separate using : or ;)",value="None",width=1000),
                                              textInput("Title_OJ","Journal Title",value=NA,width=1000),
                                              column(width=4,textInput("Issue_OJ","Issue",value=NA,width=100)),
                                              column(width=4,textInput("sPage_OJ","Start Page",value=NA,width=100)),
                                              column(width=4,textInput("ePage_OJ","End Page",value=NA,width=100)),
                                              textInput("Collection","Online collection name",value=NA,width=1000),
                                              textInput("DOI","DOI",value=NA,width=1000),
                                              textInput("URL_OJ","URL",value=NA,width=1000),
                                              textInput("Acessed_OJ","Acessed date",value=NA,width=500)),
                              conditionalPanel("input.Type=='T'",
                                               column(width=6,textInput("Degree","Degree")),
                                               column(width=6,selectInput("Published","Published?",c("TRUE","FALSE"),selected=FALSE)),
                                               textInput("Uni","Awarding body",value=NULL,width=1000),
                                               conditionalPanel("input.Published=='TRUE'",
                                                                textInput("URL_T","URL",value=NA,width=1000),
                                                                textInput("Acessed_T","Acessed date",value=NA,width=500))),
                              conditionalPanel("input.Type=='C'",
                                               textInput("Authors_C","Other authors/editors (separate using : or ;)",value="None",width=1000),
                                               textInput("Title_C","Title of Conference", value=NULL,width=1000),
                                               textInput("Location_C","Location of conference",value=NULL,width=1000),
                                               textInput("Date_C","date of conference",value=NULL,width=100),
                                               textInput("Publisher_C","Publisher",value=NULL,width=1000),
                                               textInput("Place_C","Place of publication",value=NULL,width=1000)),
                              conditionalPanel("input.Type=='CP'",
                                               textInput("Authors_CP","Other authors/editors (separate using : or ;)",value="None",width=1000),
                                               textInput("Title_CP","Title of Conference", value=NULL,width=1000),
                                               textInput("Location_CP","Location of conference",value=NULL,width=1000),
                                               textInput("Date_CP","date of conference",value=NULL,width=100),
                                               textInput("Publisher_CP","Publisher",value=NULL,width=1000),
                                               textInput("Place_CP","Place of publication",value=NULL,width=1000),
                                               column(width=4,textInput("sPage_CP","Start Page",value=NULL,width=100)),
                                               column(width=4,textInput("ePage_CP","End Page",value=NULL,width=100))),
                              conditionalPanel("input.Type=='OC'",
                                               textInput("Authors_OC","Other authors/editors (separate using : or ;)",value="None",width=1000),
                                               textInput("Title_OC","Title of Conference", value=NA,width=1000),
                                               textInput("Location_OCP","Location of conference",value=NA,width=1000),
                                               textInput("Date_OC2","date of conference",value=NA,width=100),
                                               textInput("Publisher_OC","Publisher",value=NA,width=1000),
                                               textInput("URL_OC","URL",value=NA,width=1000),
                                               textInput("Acessed_OC","Acessed date",value=NA,width=500)),
                              conditionalPanel("input.Type=='R'",
                                               textInput("Authors_R","Other Authors (separate using : or ;)",value="None",width=1000),
                                               textInput("Publisher_R","Publisher",value=NA,width=1000),
                                               textInput("Place_R","Place of publication",value=NA,width=1000)),
                              conditionalPanel("input.Type=='OR'",
                                               textInput("Authors_OR","Other Authors (separate using : or ;)",value="None",width=1000),
                                               textInput("Publisher_OR","Publisher",value=NA,width=1000),
                                               textInput("URL_OR","URL",value=NA,width=1000),
                                               textInput("Acessed_OR","Acessed date",value=NA,width=500)),
                              conditionalPanel("input.Type=='GP'",
                                               textInput("Authors_GP","Country",value="None",width=1000),
                                               textInput("URL_GP","URL",value=NA,width=1000),
                                               textInput("Acessed_GP","Acessed date",value=NA,width=500),
                                               textInput("Publisher_GP","Publisher",value=NA,width=1000),
                                               textInput("Place_GP","Place of publication",value=NA,width=1000)),
                              conditionalPanel("input.Type=='IOP'",
                                               textInput("URL_IOP","URL",value=NA,width=1000),
                                               textInput("Acessed_IOP","Acessed date",value=NA,width=500),
                                               textInput("Publisher_IOP","Publisher",value=NA,width=1000),
                                               textInput("Place_IOP","Place of publication",value=NA,width=1000)),
                              conditionalPanel("input.Type=='S'",
                                               textInput("Number","Standard reference number",value=NA,width=200),
                                               textInput("Publisher_R","Publisher",value=NA,width=1000),
                                               textInput("Place_R","Place of publication",value=NA,width=1000))
                              )
                                   ),
                   tabPanel("Tags",
                            fluidPage(
                              column(width=4,
                                     checkboxGroupInput("tags_1","Primary Tags",choices=list("Paleopathology"="PP","Evolutionary anthropology"="EA","Biological Profiling"="BP","Trauma"="TR","Forensics"="F","Excavation/Recovery"="E","Behaviour"="B","Human rights"="HR","Anaylitical methods"="AM","Bone structure/Growth"="BS","Skeletal Region"="SR","Genetics"="G","Dental"="D","Taphnomy"="TP","Theory and Ethics"="TE","Miscellaneous"="M","Other"="O","Statistics/Analysis"="S"))
                              ),
                              column(width=4,
                                     conditionalPanel("input.tags_1.indexOf('PP') >= 0 ",
                                                      checkboxGroupInput("Tags_PP","Paleopath Tags",choices=list("Infectious","Metabolic","Growth Defects","Tumors","Joint Diseases","Dental Pathology","Psuedo-Pathology","Leprosy","Syphilis","TB","Scurvy","Rickets/Osteomalacia","DISH","Porotic Hyperostosis/Criba Orbitalia","Harris Lines","General Stress Model","Ostoporosis","Schmorl's nodes","Pagets","Differential diagnosis","Zoonoses","Parasites","Bacteriology","Pathological fracture","Molecular palaeopathology "))),
                                     conditionalPanel("input.tags_1.indexOf('EA') >= 0 ",
                                                      checkboxGroupInput("Tags_EA","Evolution Tags",choices=list("Sahelanthropus tchadensis","Orrorin tugenensis","Ardipithicus sp.","Austropithicus sp.","Keyanthropus","Paranthropines (robus Austrapithicines)","Homo sp.","Homo erectus","Homo neanderthal","Archaic Homo sapien","Modern Homo sapien","Evo-Devo","Locomotion","Hand/feet","Mastication","Primate","Cultural evolution","Stone tools","Cave painting","Hunter-gather","Transition to agriculture","Out of Africa","Asian dispersal","European dispersal","American dispersal","Comparative anatomy"))),
                                     conditionalPanel("input.tags_1.indexOf('BP') >= 0 ",
                                                      checkboxGroupInput("Tags_BP","Bioprofile Tags",choices=list("Age","Sex","Ancestry","Stature","Weight/Mass","Metric","Non-Metric","Adult","Juvenille","Pelvis","Cranial","Post-Cranial","Pubic synthesis","Auricular surface","Dental","Suture","Epiphysis","Rib","Living age","Race","Population specificity","Fully Method"))),
                                     conditionalPanel("input.tags_1.indexOf('TR') >= 0 ",
                                                      checkboxGroupInput("Tags_TR","Trauma Tags",choices=list("Blunt force","Sharp force","Projectile","Fracture","Trepanation","Cannabolism","Burning","Decapitation","Torture","Pseudo-Trauma","Ante-mortem","Post-mortem","Peri-mortem"))),
                                     conditionalPanel("input.tags_1.indexOf('F') >= 0 ",
                                                      checkboxGroupInput("Tags_F","Forensic Tags",choices=list("Facial reconstruction","Identification","Sinus pattern","Crime scene"))),
                                     conditionalPanel("input.tags_1.indexOf('E') >= 0 ",
                                                      checkboxGroupInput("Tags_E","Excavation Tags",choices=list("Mass grave","Single grave","Remote sensing","Primary burial","Secondary burial","Conservation","Legal requirments","Forensic archaeology","Cremains","Grave goods","Contextualisation","Stratigraphy","Disturbed","Harris matrix"))),
                                     conditionalPanel("input.tags_1.indexOf('B') >= 0 ",
                                                      checkboxGroupInput("Tags_B","Behaviour Tags",choices=list("Handedness","Muscle markings","Facets/eburnation","Auditory Exostosis","Occupational fractures","DJD","Osteoarthritis","Artifical Cranial Deformation","Cross sectiontial geometry","Dental wear","Death rites","Compassion","Medical treatment","Warfare","Religious practice","Cooking","Diet reconstruction","Animal domestication","Transition to agriculture","Punishment","Migration","Isolation/ostricism"))),
                                     conditionalPanel("input.tags_1.indexOf('HR') >= 0 ",
                                                      checkboxGroupInput("Tags_HR","Human Rights Tags",choices=list("Mass grave","Torture","International Law"))),
                                     conditionalPanel("input.tags_1.indexOf('AM') >= 0 ",
                                                      checkboxGroupInput("Tags_AM","Analytical methods Tags",choices=list("XRD","XRF","GC-MS","MS","FTIR","X-ray","CT","MR","3D Scan","HPLC","GC","LC","SEM","TEM","Light Microscopy","Histology","Radiocarbon dating","K-Ar dating","Other dating","N istope","C isotope","O isotope","Sr isotope","Other isotope","Protomics","Genomics")))
                                     ),
                              column(width=4,
                                     conditionalPanel("input.tags_1.indexOf('BS') >= 0 ",
                                                      checkboxGroupInput("Tags_BS","Structure Tags",choices=list("Long","Flat","Irregular","Short","Sesmoid","Pneumatic","Trabecular","Cortical","diploe","Periosteum","Endosteum","Lamella","Haversian system","Osteon","Volkman's canal","Canaliculi","Lacunae","Howship's lacunae","Fiber/Fibril","Collagen","Hydroxyapitite","Crystal structure","Lattice parameters","Substitutions","Channel site","Endochondral ossifcation","Intramebraneous ossification","Epiphyseal Plates","Remodeling","Wnt signalling","Osteocytes","Osteoblasts","Osteoclasts","osteoprogenitor","Molecular taphnomy","Archaeology vs Modern bone","Comparative anatomy","Heating","Primary changes"))),
                                     conditionalPanel("input.tags_1.indexOf('SR') >= 0 ",
                                                      checkboxGroupInput("Tags_SR","Region Tags",choices=list("Cranial","Post-Cranial","Axial","Appendicular","Spinal","Cervical Spine","Thorasic spine","Lumbar spine","Sacrum","Coccyx","Thorasic","Shoulder","Pelvis","Upper Limb","Lower Limb","Arm","Leg","Hand","Foot","Ankle","Wrist","Jaw","Mandible","Calvarium","Cranium","Calotte","Splanchnocranium","Neurocranium","Orbit","Nasal","rib","Scapula","Os Coxa","Femur","Humerus","Tibia","Fibula","Ulna","Radius","Talus","Calcaneous","Sternum"))),
                                     conditionalPanel("input.tags_1.indexOf('G') >= 0 ",
                                                      checkboxGroupInput("Tags_G","Genomic Tags",choices=list("aDNA","mDNA","RNA","y-chromosome","PCR","Bacteria","DNA taphnomy","Diagenesis","Extraction","Contamination","Sanger","Nextgen","Genetic distance","Genetic Drift","Identification","Sex","Molecular palaeopathology","MFI","Ethnic orgin","Neanderthal","Hominid","Ethics","Databases","Protocol"))),
                                     conditionalPanel("input.tags_1.indexOf('D') >= 0 ",
                                                      checkboxGroupInput("Tags_D","Dental Tags",choices=list("Incisor","Canine","Pre-Molar","Molar","Upper","Lower","Decidous","Perminant","Eruption","Wear","Dental Pathology","Enamel","Pulp","Dentine","Cementum","Comparative anatomy","Growth","Calculus","LEH","Cyst","Cavity","Abcess","Dental Care","Identification","Pre-mortem loss","Post-mortem loss","Behaviour","Diet reconstruction","Dental inventory","Torus","Peridontal disease"))),
                                     conditionalPanel("input.tags_1.indexOf('TP') >= 0 ",
                                                      checkboxGroupInput("Tags_TP","Taphnomy Tags",choices=list("Diffferential preservation","Burial","Excaration","Cremation","Framentation","Comingling","Primary burial","Secondary burial","Disturbance","Time","Age","Water","Scavenging","pH","Mummification","Ice","Bog body","Soil content","Roots","Pseudo-Trauma","Pseudo-Pathology","Diagenesis","Molecular taphnomy","DNA taphnomy","Post-mortem loss"))),
                                     conditionalPanel("input.tags_1.indexOf('TE') >= 0 ",
                                                      checkboxGroupInput("Tags_TE","Theory and Ethics Tags",choices=list("Standardisation","Wolf's Law","Out of Africa","Ethnographic study","Osteological paradox","NAGPRA","Stratigraphy","General Stress Model","Databases","Ethics","Race","Conservation","Preservation","Demography","Skeletal collections","Display","Population specificity","Population Level analysis","Complete analysis","Infection and nutrition","Primary/secondary changes","Reproducibility","Transparency","History","Processual Archaeology","Active agent","Social Identity","Biocultural","Uniformitarianism","Catastrophism"))),
                                     conditionalPanel("input.tags_1.indexOf('M') >= 0 ",
                                                      checkboxGroupInput("Tags_M","Miscellaneous Tags",choices=list("Bog body","Mummification","Ice-Man","Artifical cranial deformation","Facial reconstruction","Archaeology vs Modern bone","Comparative anatomy","Case study","MFI","Frontal sinus","Non-Metric traits","Skeletal Inventory","MNI","NISP","MLNI","Social status"))),
                                     conditionalPanel("input.tags_1.indexOf('S') >= 0 ",
                                                      checkboxGroupInput("Tags_S","Stats Tags",choices=list("Geometric morphometric","Discriminate function","Modelling","Parametric","Non-Parametric","Chi-Squared","CRANID","Graph theory","Visualisation","Digital Measurment","Digital Assesment","Reproducibility","Accuracy","Code","R","Python","MATLAB","Aggregate","PYL","Quality adjusted life years","Lovejoy Age Adjustment","Population specificity","Standard","Summary Statistics","Kurtosis/Skewness","Mortality rate","Morbity rate"))),
                                     conditionalPanel("input.tags_1.indexOf('O') >= 0 ",
                                                      textInput("Tags_O","Other Tags",value=NA,width=600))
                                     )
                              )),
                   tabPanel("Search",
                            sidebarPanel(textInput("FSearch","Filepath(without extension)",value="../data/TestLibrary"),
                              selectInput("SearchBy","Search By",c("Title","Author","Date","Author and date","Tags")),
                            conditionalPanel("input.SearchBy=='Title'",textInput("STitle","Title",value="None",width=1000)),
                            conditionalPanel("input.SearchBy=='Author'|input.SearchBy=='Author and date'",textInput("SAuthor","Author",value="None",width=600)),
                            conditionalPanel("input.SearchBy=='Date'|input.SearchBy=='Author and date'",textInput("SDate","Date",value=NA,width=200)),
                            conditionalPanel("input.SearchBy=='Author and date'",h6("n.b Author and date search only checks the primary author, use Author search for other authors")),
                            conditionalPanel("input.SearchBy=='Tags'",
                                             h5(textOutput("Tags2")),
                                             h6("n.b.to change tags go to the Tags tab")),
                            actionButton("Search","Search")),
                            mainPanel(h3("Search Results"),
                                      tableOutput("Results"))
                            ),
                   tabPanel("Add",
                            fluidPage(
                              mainPanel(
                                selectInput("NewSearch","New/Search?",c("New","Search")),
                                h3("Reference:"),
                                conditionalPanel("input.NewSearch=='Search'",
                                                 textInput("resultNum","Search Result number",value=1),
                                                 h4(textOutput("SRef"))),
                                conditionalPanel("input.NewSearch=='New'",
                                                 h4(textOutput("Ref")),
                                                 h3("Tags"),
                                                 h4(textOutput("Tags")))),
                              sidebarPanel(textInput("FWrite","Filepath (without extension)"),
                              conditionalPanel("input.NewSearch=='New'",actionButton("Write_L","Write to Library")),
                              actionButton("Write_B","Write to Bibliography"),
                              h4(textOutput("WB")),
                              h4(textOutput("WL")))
                              
                              ))
                   
                   ))